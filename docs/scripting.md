The scripting system works around a state-based engine.